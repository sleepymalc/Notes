\lecture{15}{9 Feb. 11:00}{Riemann Integral}
\subsection{Riemann Integrability}
We are now working in \((\mathbb{\MakeUppercase{r}} , \mathcal{\MakeUppercase{l}} , m)\). Let's first revisit the definition of
Riemann Integral. Let \(P\) be a partition of \([a, b]\) as
\[
	P = \{a = t_0 < t_1 < \ldots < t_k = b \}.
\]
Then the \emph{lower Riemann sum} of \(f\) using \(P\) is equal to \(L_P\), which is defined as
\[
	L_{P} = \sum\limits_{i=1}^{K} \left(\inf _{[t_{i-1}, t_{i}]} f \right)(t_{i} - t_{i - 1}),
\]
and the \emph{upper Riemann sum} of \(f\) using \(P\) is equal to \(U_P\), which is defined as
\[
	U_{P} = \sum\limits_{i=1}^{K} \left(\sup _{[t_{i-1}, t_{i}]} f \right)(t_{i} - t_{i - 1}).
\]

Then we call
\begin{itemize}
	\item \emph{Lower Riemann integral} of \(f = \underline{I} = \sup_P L_{P} \)
	\item \emph{Upper Riemann integral} of \(f = \overline{I}  = \inf_P U_{P} \)
\end{itemize}

\begin{definition}[Riemann (Darboux) integrable]\label{def:Riemann-integrable}
	A \underline{bounded} function \(f\colon [a, b]\to \mathbb{\MakeUppercase{r}} \) is called \emph{Riemann (Darboux) integrable}
	if
	\[
		\underline{I} = \overline{I}
	\]
	If so, then \(\underline{I} = \overline{I} = \int_{a}^{b} f(x) \,\mathrm{d}x\).
\end{definition}
\begin{note}
	We see that
	\begin{itemize}
		\item If \(P\subset P ^\prime \), then
		      \[
			      L_{P}\leq L_{P ^\prime },\quad U_{P ^\prime }\leq U_{P}.
		      \]
		\item Recall that continuous functions on \([a, b]\) are \hyperref[def:Riemann-integrable]{Reimann integrable} on \([a, b]\).
	\end{itemize}
\end{note}
\begin{theorem}
	Let \(f\colon [a, b]\to \mathbb{\MakeUppercase{r}} \) be a \underline{bounded} function. Then
	\begin{enumerate}
		\item If \(f\) is \hyperref[def:Riemann-integrable]{Reimann integrable}, then \(f\) is \hyperref[def:measurable-function]{Lebesgue measurable}, thus
		      \hyperref[def:integrable]{Lebesgue integrable}. Further,
		      \[
			      \int_{a}^{b} f(x) \,\mathrm{d}x = \int_{[a, b]}f \,\mathrm{d}m.
		      \]
		\item If \(f\) is \hyperref[def:Riemann-integrable]{Reimann integrable} \(\iff \) \(f\) is continuous \underline{Lebesgue \hyperref[def:mu-almost-everywhere]{a.e.}}\footnote{Here, we
			      mean that the set where \(f\) is discontinuous is a \hyperref[def:mu-null-set]{null set} under \hyperref[def:Lebesgue-measure]{Lebesgue measure}.}
	\end{enumerate}
\end{theorem}
\begin{proof}
	There exists \(P_1\subset P_2\subset \ldots  \) such that \(L_{P_{n}}\nearrow \underline{I} \) and \(U_{P_{n}}\searrow \overline{I} \).\footnote{Here, we took refinements of \(P_{n}\) if needed.}
	Now, define \hyperref[def:simple-function]{simple (step) functions}
	\begin{itemize}
		\item \(\phi _{n} = \sum\limits_{i=1}^{K} \left(\inf\limits_{[t_{i-1}, t_{i}]} f \right) \mathbbm{1}_{(t_{i-1}, t_{i}]} \)
		\item \(\psi _{n} = \sum\limits_{i=1}^{K} \left(\sup\limits_{[t_{i-1}, t_{i}]} f \right) \mathbbm{1}_{(t_{i-1}, t_{i}]} \)
	\end{itemize}
	if \(P_{n} = \{a = t_0 < t_1 < \ldots < t_{K} \}\). Let \(\phi \coloneqq \sup_n \phi _{n}\) and \(\psi \coloneqq \inf _n \psi _{n}\).
	We then see that \(\phi , \psi \) are \hyperref[def:measurable-function]{Lebesgue (Borel) measurable function}.
	\begin{note}
		Note that
		\begin{itemize}
			\item \(\exists M> 0\) such that \(\underset{n\in\mathbb{\MakeUppercase{n}} }{\forall }\ \left\vert \phi _{n} \right\vert, \left\vert \psi _{n} \right\vert \leq M\mathbbm{1}_{[a, b]} \)
			\item \(\int \phi _{n}\,\mathrm{d}m = L_{P_{n}}\), \(\int \psi _{n}\,\mathrm{d}m = U_{P_{n}}\)
		\end{itemize}
	\end{note}
	By \autoref{thm:dominated-convergence-theorem} and the fact that \(M\mathbbm{1}_{[a, b]} \in L^1(\mathbb{\MakeUppercase{r}} , \mathcal{\MakeUppercase{l}} , m) \),
	we have
	\[
		\underline{I} = \lim\limits_{n \to \infty} \int_{}^{} \phi _{n} \,\mathrm{d}m = \int_{}^{} \phi  \,\mathrm{d}m,\quad \overline{I}  = \int_{}^{} \psi  \,\mathrm{d}m.
	\]
	Thus,
	\[
		\begin{split}
			f \text{ is \hyperref[def:Riemann-integrable]{Riemann integrable}}
			\iff  &\int \phi = \int \psi\\
			\iff  &\int (\psi - \phi ) = 0\\
			\iff  &\psi = \phi \text{ Lebesgue \hyperref[def:mu-almost-everywhere]{a.e.}}
		\end{split}
	\]

\end{proof}

\subsection{Modes of Convergence}
As we should already see, there are different \emph{modes} of convergence. Let's formalize them.
\begin{definition}[Pointwise, Uniformly convergence]\label{def:pointwise-convergence}\label{def:uniformly-convergence}
	Let
	\[
		f_{n}, f\colon X\to \mathbb{\MakeUppercase{c}},
	\]
	and \(S\subset X\). Then we say
	\begin{itemize}
		\item \(f_{n}\to f\) \emph{pointwise} on \(S\) if
		      \[
			      \underset{x\in S}{\forall}\underset{\epsilon>0}{\forall} \underset{ N\in \mathbb{\MakeUppercase{N}}}{\exists}\underset{n\geq  N}{\forall}\ \left\vert f_{n}(x) - f(x) \right\vert < \epsilon.
		      \]
		\item \(f_{n}\to f\) \emph{uniformly} on \(S\) if
		      \[
			      \underset{\epsilon >0}{\forall}\underset{N\in\mathbb{\MakeUppercase{n}}}{\exists}\underset{x\in S}{\forall}\underset{n\geq N}{\forall}\ \left\vert f_{n}(x) - f(x) \right\vert < \epsilon.
		      \]
	\end{itemize}
\end{definition}

\begin{remark}
	We see that we can replace \(\forall \epsilon > 0\) by \(\forall k\in \mathbb{\MakeUppercase{n}} \) with \(\epsilon \) changing to \(\frac{1}{k}\).
\end{remark}
\begin{lemma}
	Let \(B_{n, k}\) be
	\[
		B_{n, k}\coloneqq \left\{x\in X \mid \left\vert f_{n}(x) - f(x) \right\vert < \frac{1}{k}\right\}.
	\]
	Then
	\begin{enumerate}
		\item \(f_{n}\to f\) \hyperref[def:pointwise-convergence]{pointwise} on \(S\) if and only if
		      \[
			      S\subset \bigcap\limits_{k=1}^{\infty} \bigcup\limits_{N=1}^{\infty} \bigcap\limits_{n=N}^{\infty} B_{n, k}.
		      \]
		\item \(f_{n}\to f\) \hyperref[def:uniformly-convergence]{uniformly} on \(S\) if and only if \(\exists N_1, N_2, \ldots \in \mathbb{\MakeUppercase{n}}\) such that
		      \[
			      S\subset \bigcap\limits_{k=1}^{\infty} \bigcap\limits_{n=N_{k}}^{\infty} B_{n, k}.
		      \]
	\end{enumerate}
\end{lemma}
\begin{proof}
	This essentially follows from \autoref{def:pointwise-convergence}.
\end{proof}

\begin{definition}[Converges a.e., Converges in \(L^1\)]\label{def:converge-almost-everywhere}\label{def:converge-in-L-1}
	Let \((X, \mathcal{\MakeUppercase{a}} , \mu )\) be a \hyperref[def:measure-space]{measure space}. Assuming that \(f_{n}, f\) are \hyperref[def:measurable-function]{measurable function},
	then
	\begin{enumerate}
		\item \emph{\(f_{n}\to f\) almost everywhere} means
		      \[
			      \exists \text{ \hyperref[def:mu-null-set]{null set} } E\text{ such that } f_{n}\to f \text{ \hyperref[def:pointwise-convergence]{pointwise} on } E^{c}.
		      \]
		\item \emph{\(f_{n}\to f\) in \(L^1\)} means
		      \[
			      \lim\limits_{n \to \infty} \left\lVert f_{n} - f\right\rVert = 0.
		      \]
	\end{enumerate}
\end{definition}
\begin{eg}
	Given \((\mathbb{\MakeUppercase{r}} , \mathcal{\MakeUppercase{l}} , m)\) and let \(f = 0\). We see the followings.
	\begin{enumerate}
		\item \(f_{n} = \mathbbm{1}_{(n, n+1)} \)
		\item \(f_{n} = \frac{1}{n}\mathbbm{1}_{(0, n)} \)
		\item \(f_{n} = n \mathbbm{1}_{(0, \frac{1}{n})} \)
		\item \textbf{Typewriter functions}.

		      \begin{figure}[H]
			      \centering
			      \resizebox{\textwidth}{!}{%
				      \begin{tikzpicture}[font=\Large,shorten >=-2.5pt,shorten <=-2.5pt]
					      \begin{axis}[
							      axis x line*=bottom,
							      axis y line*=right,
							      axis z line*=left,
							      plot box ratio = 3 1000 2,
							      view={.3}{.2},
							      xmin=-0.2,    xmax=1.25,
							      ymin=0.6,    ymax=\nMAX+0.3,
							      zmin=0,    zmax=1.0,
							      xtick={0,1/8,2/8,3/8,4/8,5/8,6/8,7/8,1},
							      xticklabels={$0$,$\frac{1}{2^3}$,$\frac{2}{2^3}$,$\frac{3}{2^3}$,$\frac{4}{2^3}$,$\frac{5}{2^3}$,$\frac{6}{2^3}$,$\frac{7}{2^3}$,$1$},
							      ytick={0,...,\nMAX},
							      ztick={0,...,1.0},
							      xlabel=$x$,
							      ylabel=$n$,
							      zlabel=$f_n(x)$,
							      x label style={at={(axis description cs:0.067,-0.001)},anchor=north},
							      y label style={at={(axis description cs:0.062,0.145)},anchor=south},
							      z label style={at={(axis description cs:-0.002,0.035)},anchor=south},
							      yscale=5,
							      xscale=5,
							      legend entries={$f_n(x)=1\,$,
									      $f_n(x)=0\,$},
							      legend style={rounded corners=3pt,at={(0.023,0.14)}},
							      legend style={nodes={scale=1.5, transform shape}},
							      legend plot pos=right,
						      ]
						      \foreach \n in {1, ..., \nMAX}
							      {
								      \pgfmathsetmacro\k{floor(log2(\n+1e-1))}
								      \pgfmathsetmacro{\xm}{-0.2}
								      \pgfmathsetmacro\xM{1.2}
								      \pgfmathsetmacro\xa{(\n-(2^(\k)))/(2^(\k))}
								      \pgfmathsetmacro\xb{(\n-(2^(\k))+1)/(2^(\k))}
								      \edef\temp
								      {
									      \noexpand\coordinate (d1) at (axis cs:\xm,\n,0);
									      \noexpand\coordinate (d2) at (axis cs:\xa,\n,0);
									      \noexpand\coordinate (d3) at (axis cs:\xa,\n,1);
									      \noexpand\coordinate (d4) at (axis cs:\xb,\n,1);
									      \noexpand\coordinate (d5) at (axis cs:\xb,\n,0);
									      \noexpand\coordinate (d6) at (axis cs:\xM,\n,0);
									      \noexpand\coordinate (g0) at (axis cs:\xm,\n,1);
									      \noexpand\coordinate (g1) at (axis cs:\xM,\n,1);
								      }
								      \temp
								      \draw[blue,<-o] (d1)--(d2);
								      \draw[black,dashed,line width=0.04mm] (d2)--(d3);
								      \draw[red,*-*]   (d3)--(d4);
								      \draw[black,dashed,line width=0.04mm] (d4)--(d5);
								      \draw[blue,o->] (d5)--(d6);
								      \draw[black,dashed,line width=0.04mm] (g0)--(g1);
							      }
						      \pgfplotsinvokeforeach{0, ..., \xGrSamp}
						      {
							      \draw[black,dashed,line width=0.06mm] (axis cs:#1/\xGrSamp,0,0)--(axis cs:#1/\xGrSamp,\nMAX,0);
						      }
						      \addlegendimage{no markers,red}
						      \addlegendimage{no markers,blue}
					      \end{axis}
					      \node[rectangle,draw,rounded corners=3pt,text width=7.7cm] at (29.3,1.7)
					      {\huge Typewriter Sequence: \\$f_n(x)={\mathbbm{1}}_{[\frac{n-2^k}{2^k},\frac{n-2^k+1}{2^k}]},$\\
					      $\forall\, k\geq 0\,\, \&\,\, 2^k\leq n<2^{k+1} $};
				      \end{tikzpicture}
			      }%
		      \end{figure}
	\end{enumerate}
\end{eg}